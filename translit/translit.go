package translit

import (
	"strings"
)

// Transliterate runs the given maps on s and returns the result
func Transliterate(s string, useMaps ...string) string {
	// Create variable to store modified string
	out := s
	// If custom map exists
	if customMap, ok := Maps["custom"]; ok {
		// Perform transliteration with it
		out = customMap.Transliterate(out)
	}
	// For every map to use
	for _, useMap := range useMaps {
		// If custom, skip
		if useMap == "custom" {
			continue
		}
		// Get requested map
		translitMap, ok := Maps[useMap]
		if !ok {
			continue
		}
		// Perform transliteration
		out = translitMap.Transliterate(out)
	}
	// Return result
	return out
}

// Transliterator is implemented by anything with a
// Transliterate method, which performs transliteration
// and returns the resulting string.
type Transliterator interface {
	Transliterate(string) string
}

// Map implements Transliterator using a slice where
// every odd element is a key and every even one is a value
// which replaces the key.
type Map []string

func (mt Map) Transliterate(s string) string {
	return strings.NewReplacer(mt...).Replace(s)
}

// Maps stores transliteration maps as slices to preserve order.
// Some of these maps were sourced from https://codeberg.org/Freeyourgadget/Gadgetbridge
var Maps = map[string]Transliterator{
	"eASCII": Map{
		"Å“", "oe",
		"Âª", "a",
		"Â°", "o",
		"Â«", `"`,
		"Â»", `"`,
	},
	"Scandinavian": Map{
		"Ã†", "Ae",
		"Ã¦", "ae",
		"Ã˜", "Oe",
		"Ã¸", "oe",
		"Ã…", "Aa",
		"Ã¥", "aa",
	},
	"German": Map{
		"Ã¤", "ae",
		"Ã¶", "oe",
		"Ã¼", "ue",
		"Ã„", "Ae",
		"Ã–", "Oe",
		"Ãœ", "Ue",
		"ÃŸ", "ss",
		"áº", "SS",
	},
	"Hebrew": Map{
		"×", "a",
		"×‘", "b",
		"×’", "g",
		"×“", "d",
		"×”", "h",
		"×•", "u",
		"×–", "z",
		"×—", "kh",
		"×˜", "t",
		"×™", "y",
		"×›", "c",
		"×œ", "l",
		"×", "m",
		"× ", "n",
		"×¡", "s",
		"×¢", "'",
		"×¤", "p",
		"×¦", "ts",
		"×§", "k",
		"×¨", "r",
		"×©", "sh",
		"×ª", "th",
		"×£", "f",
		"×¥", "ts",
		"×š", "ch",
		"×", "m",
		"×Ÿ", "n",
	},
	"Greek": Map{
		"Î±", "a",
		"Î¬", "a",
		"Î²", "v",
		"Î³", "g",
		"Î´", "d",
		"Îµ", "e",
		"Î­", "e",
		"Î¶", "z",
		"Î·", "i",
		"Î®", "i",
		"Î¸", "th",
		"Î¹", "i",
		"Î¯", "i",
		"ÏŠ", "i",
		"Î", "i",
		"Îº", "k",
		"Î»", "l",
		"Î¼", "m",
		"Î½", "n",
		"Î¾", "ks",
		"Î¿", "o",
		"ÏŒ", "o",
		"Ï€", "p",
		"Ï", "r",
		"Ïƒ", "s",
		"Ï‚", "s",
		"Ï„", "t",
		"Ï…", "y",
		"Ï", "y",
		"Ï‹", "y",
		"Î°", "y",
		"Ï†", "f",
		"Ï‡", "ch",
		"Ïˆ", "ps",
		"Ï‰", "o",
		"Ï", "o",
		"Î‘", "A",
		"Î†", "A",
		"Î’", "B",
		"Î“", "G",
		"Î”", "D",
		"Î•", "E",
		"Îˆ", "E",
		"Î–", "Z",
		"Î—", "I",
		"Î‰", "I",
		"Î˜", "TH",
		"Î™", "I",
		"ÎŠ", "I",
		"Îª", "I",
		"Îš", "K",
		"Î›", "L",
		"Îœ", "M",
		"Î", "N",
		"Î", "KS",
		"ÎŸ", "O",
		"ÎŒ", "O",
		"Î ", "P",
		"Î¡", "R",
		"Î£", "S",
		"Î¤", "T",
		"Î¥", "Y",
		"Î", "Y",
		"Î«", "Y",
		"Î¦", "F",
		"Î§", "CH",
		"Î¨", "PS",
		"Î©", "O",
		"Î", "O",
	},
	"Russian": Map{
		"Ğ", "Ğ™o",
		"Ñ‘", "Ğ¹o",
	},
	"Ukranian": Map{
		"Ò‘", "gh",
		"Ñ”", "je",
		"Ñ–", "i",
		"Ñ—", "ji",
		"Ò", "GH",
		"Ğ„", "JE",
		"Ğ†", "I",
		"Ğ‡", "JI",
	},
	"Arabic": Map{
		"Ø§", "a",
		"Ø¨", "b",
		"Øª", "t",
		"Ø«", "th",
		"Ø¬", "j",
		"Ø­", "7",
		"Ø®", "5",
		"Ø¯", "d",
		"Ø°", "th",
		"Ø±", "r",
		"Ø²", "z",
		"Ø³", "s",
		"Ø´", "sh",
		"Øµ", "9",
		"Ø¶", "9'",
		"Ø·", "6",
		"Ø¸", "6'",
		"Ø¹", "3",
		"Øº", "3'",
		"Ù", "f",
		"Ù‚", "q",
		"Ùƒ", "k",
		"Ù„", "l",
		"Ù…", "m",
		"Ù†", "n",
		"Ù‡", "h",
		"Ùˆ", "w",
		"ÙŠ", "y",
		"Ù‰", "a",
		"ïº“", "",
		"Ø¢", "2",
		"Ø¦", "2",
		"Ø¥", "2",
		"Ø¤", "2",
		"Ø£", "2",
		"Ø¡", "2",
		"Ù ", "0",
		"Ù¡", "1",
		"Ù¢", "2",
		"Ù£", "3",
		"Ù¤", "4",
		"Ù¥", "5",
		"Ù¦", "6",
		"Ù§", "7",
		"Ù¨", "8",
		"Ù©", "9",
	},
	"Farsi": Map{
		"Ù¾", "p",
		"Ú†", "ch",
		"Ú˜", "zh",
		"Ú©", "k",
		"Ú¯", "g",
		"ÛŒ", "y",
		"\u200c", " ",
		"ØŸ", "?",
		"Ùª", "%",
		"Ø›", ";",
		"ØŒ", ":",
		"Û±", "1",
		"Û²", "2",
		"Û³", "3",
		"Û´", "4",
		"Ûµ", "5",
		"Û¶", "6",
		"Û·", "7",
		"Û¸", "8",
		"Û¹", "9",
		"Û°", "0",
		"Â»", "<",
		"Â«", ">",
		"Ù", "e",
		"Ù", "a",
		"Ù", "o",
		"Ù‘", "",
	},
	"Polish": Map{
		"Å", "L",
		"Å‚", "l",
	},
	"Lithuanian": Map{
		"Ä…", "a",
		"Ä", "c",
		"Ä™", "e",
		"Ä—", "e",
		"Ä¯", "i",
		"Å¡", "s",
		"Å³", "u",
		"Å«", "u",
		"Å¾", "z",
	},
	"Estonian": Map{
		"Ã¤", "a",
		"Ã„", "A",
		"Ã¶", "o",
		"Ãµ", "o",
		"Ã–", "O",
		"Ã•", "O",
		"Ã¼", "u",
		"Ãœ", "U",
	},
	"Icelandic": Map{
		"Ã", "Th",
		"Ã¾", "th",
		"Ã", "D",
		"Ã°", "d",
	},
	"Czeck": Map{
		"Å™", "r",
		"Ä›", "e",
		"Ã½", "y",
		"Ã¡", "a",
		"Ã­", "i",
		"Ã©", "e",
		"Ã³", "o",
		"Ãº", "u",
		"Å¯", "u",
		"Ä", "d",
		"Å¥", "t",
		"Åˆ", "n",
	},
	"French": Map{
		"Ã ", "a",
		"Ã¢", "a",
		"Ã©", "e",
		"Ã¨", "e",
		"Ãª", "e",
		"Ã«", "e",
		"Ã¹", "u",
		"Ã¼", "u",
		"Ã¿", "y",
		"Ã§", "c",
	},
	"Armenian": Map{
		"Õ¡Õ¸Ö‚", "au",
		"Õ¢Õ¸Ö‚", "bu",
		"Õ£Õ¸Ö‚", "gu",
		"Õ¤Õ¸Ö‚", "du",
		"Õ¥Õ¸Ö‚", "eu",
		"Õ¦Õ¸Ö‚", "zu",
		"Õ§Õ¸Ö‚", "eu",
		"Õ¨Õ¸Ö‚", "yu",
		"Õ©Õ¸Ö‚", "tu",
		"ÕªÕ¸Ö‚", "ju",
		"Õ«Õ¸Ö‚", "iu",
		"Õ¬Õ¸Ö‚", "lu",
		"Õ­Õ¸Ö‚", "xu",
		"Õ®Õ¸Ö‚", "cu",
		"Õ¯Õ¸Ö‚", "ku",
		"Õ°Õ¸Ö‚", "hu",
		"Õ±Õ¸Ö‚", "dzu",
		"Õ²Õ¸Ö‚", "xu",
		"Õ³Õ¸Ö‚", "cu",
		"Õ´Õ¸Ö‚", "mu",
		"ÕµÕ¸Ö‚", "yu",
		"Õ¶Õ¸Ö‚", "nu",
		"Õ·Õ¸Ö‚", "shu",
		"Õ¹Õ¸Ö‚", "chu",
		"ÕºÕ¸Ö‚", "pu",
		"Õ»Õ¸Ö‚", "ju",
		"Õ¼Õ¸Ö‚", "ru",
		"Õ½Õ¸Ö‚", "su",
		"Õ¾Õ¸Ö‚", "vu",
		"Õ¿Õ¸Ö‚", "tu",
		"Ö€Õ¸Ö‚", "ru",
		"ÖÕ¸Ö‚", "cu",
		"ÖƒÕ¸Ö‚", "pu",
		"Ö„Õ¸Ö‚", "qu",
		"Ö…Õ¸Ö‚", "ou",
		"Ö‡Õ¸Ö‚", "eu",
		"Ö†Õ¸Ö‚", "fu",
		"Õ¸Õ¸Ö‚", "vou",
		"Õ¸Ö‚", "u",
		"Õ¢Õ¸", "bo",
		"Õ£Õ¸", "go",
		"Õ¤Õ¸", "do",
		"Õ¦Õ¸", "zo",
		"Õ©Õ¸", "to",
		"ÕªÕ¸", "jo",
		"Õ¬Õ¸", "lo",
		"Õ­Õ¸", "xo",
		"Õ®Õ¸", "co",
		"Õ¯Õ¸", "ko",
		"Õ°Õ¸", "ho",
		"Õ±Õ¸", "dzo",
		"Õ²Õ¸", "xo",
		"Õ³Õ¸", "co",
		"Õ´Õ¸", "mo",
		"ÕµÕ¸", "yo",
		"Õ¶Õ¸", "no",
		"Õ·Õ¸", "so",
		"Õ¹Õ¸", "co",
		"ÕºÕ¸", "po",
		"Õ»Õ¸", "jo",
		"Õ¼Õ¸", "ro",
		"Õ½Õ¸", "so",
		"Õ¾Õ¸", "vo",
		"Õ¿Õ¸", "to",
		"Ö€Õ¸", "ro",
		"ÖÕ¸", "co",
		"ÖƒÕ¸", "po",
		"Ö„Õ¸", "qo",
		"Ö‡Õ¸", "eo",
		"Ö†Õ¸", "fo",
		"Õ¸", "vo",
		"Õ¥Ö‚", "ev",
		"Õ¥Õ¾", "ev",
		"Õ¡", "a",
		"Õ¢", "b",
		"Õ£", "g",
		"Õ¤", "d",
		"Õ¥", "e",
		"Õ¦", "z",
		"Õ§", "e",
		"Õ¨", "y",
		"Õ©", "t",
		"Õª", "j",
		"Õ«", "i",
		"Õ¬", "l",
		"Õ­", "x",
		"Õ®", "c",
		"Õ¯", "k",
		"Õ°", "h",
		"Õ±", "dz",
		"Õ²", "x",
		"Õ³", "c",
		"Õ´", "m",
		"Õµ", "y",
		"Õ¶", "n",
		"Õ·", "sh",
		"Õ¹", "ch",
		"Õº", "p",
		"Õ»", "j",
		"Õ¼", "r",
		"Õ½", "s",
		"Õ¾", "v",
		"Õ¿", "t",
		"Ö€", "r",
		"Ö", "c",
		"Öƒ", "p",
		"Ö„", "q",
		"Ö…", "o",
		"Ö‡", "ev",
		"Ö†", "f",
		"Ö‚", "",
	},
	"Emoji": Map{
		"ğŸ˜‚", ":')",
		"ğŸ˜Š", ":)",
		"ğŸ˜ƒ", ":)",
		"ğŸ˜©", "-_-",
		"ğŸ˜", ":â€‘J",
		"ğŸ’œ", "<3",
		"ğŸ’–", "<3",
		"ğŸ’—", "<3",
		"â¤ï¸", "<3",
		"ğŸ’•", "<3",
		"ğŸ’", "<3",
		"ğŸ’˜", "<3",
		"ğŸ’“", "<3",
		"ğŸ’š", "<3",
		"ğŸ’™", "<3",
		"ğŸ’”", "</3",
		"ğŸ˜±", "D:",
		"ğŸ˜®", ":O",
		"ğŸ˜", ":P",
		"ğŸ˜", ":x",
		"ğŸ˜¢", ":(",
		"ğŸ’¯", ":100:",
		"ğŸ”¥", ":fire:",
		"ğŸ˜‰", ";)",
		"ğŸ˜´", ":zzz:",
		"ğŸ’¤", ":zzz:",
	},
	"Korean": &KoreanTranslit{},
}
